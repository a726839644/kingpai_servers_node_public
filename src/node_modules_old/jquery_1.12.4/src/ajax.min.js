define(["./core","./var/document","./var/rnotwhite","./ajax/var/location","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseJSON","./ajax/parseXML","./deferred"],function(n,p,r,a,s,i){var k=/#.*$/,d=/([?&])_=[^&]*/,b=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,e=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,h=/^(?:GET|HEAD)$/,j=/^\/\//,f=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,w={},u={},l="*/".concat("*"),v=a.href,g=f.exec(v.toLowerCase())||[];function m(x){return function(B,C){if(typeof B!=="string"){C=B;B="*"}var y,z=0,A=B.toLowerCase().match(r)||[];if(n.isFunction(C)){while((y=A[z++])){if(y.charAt(0)==="+"){y=y.slice(1)||"*";(x[y]=x[y]||[]).unshift(C)}else{(x[y]=x[y]||[]).push(C)}}}}}function q(x,z,D,A){var y={},B=(x===u);function C(E){var F;y[E]=true;n.each(x[E]||[],function(H,G){var I=G(z,D,A);if(typeof I==="string"&&!B&&!y[I]){z.dataTypes.unshift(I);C(I);return false}else{if(B){return !(F=I)}}});return F}return C(z.dataTypes[0])||!y["*"]&&C("*")}function o(z,A){var x,y,B=n.ajaxSettings.flatOptions||{};for(y in A){if(A[y]!==undefined){(B[y]?z:(x||(x={})))[y]=A[y]}}if(x){n.extend(true,z,x)}return z}function t(F,E,B){var x,A,z,C,y=F.contents,D=F.dataTypes;while(D[0]==="*"){D.shift();if(A===undefined){A=F.mimeType||E.getResponseHeader("Content-Type")}}if(A){for(C in y){if(y[C]&&y[C].test(A)){D.unshift(C);break}}}if(D[0] in B){z=D[0]}else{for(C in B){if(!D[0]||F.converters[C+" "+D[0]]){z=C;break}if(!x){x=C}}z=z||x}if(z){if(z!==D[0]){D.unshift(z)}return B[z]}}function c(I,A,F,y){var x,D,G,B,z,H={},E=I.dataTypes.slice();if(E[1]){for(G in I.converters){H[G.toLowerCase()]=I.converters[G]}}D=E.shift();while(D){if(I.responseFields[D]){F[I.responseFields[D]]=A}if(!z&&y&&I.dataFilter){A=I.dataFilter(A,I.dataType)}z=D;D=E.shift();if(D){if(D==="*"){D=z}else{if(z!=="*"&&z!==D){G=H[z+" "+D]||H["* "+D];if(!G){for(x in H){B=x.split(" ");if(B[1]===D){G=H[z+" "+B[0]]||H["* "+B[0]];if(G){if(G===true){G=H[x]}else{if(H[x]!==true){D=B[0];E.unshift(B[1])}}break}}}}if(G!==true){if(G&&I["throws"]){A=G(A)}else{try{A=G(A)}catch(C){return{state:"parsererror",error:G?C:"No conversion from "+z+" to "+D}}}}}}}}return{state:"success",data:A}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:v,type:"GET",isLocal:e.test(g[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":l,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(y,x){return x?o(o(y,n.ajaxSettings),x):o(n.ajaxSettings,y)},ajaxPrefilter:m(w),ajaxTransport:m(u),ajax:function(B,y){if(typeof B==="object"){y=B;B=undefined}y=y||{};var K,M,C,R,G,x,N,z,F=n.ajaxSetup({},y),T=F.context||F,I=F.context&&(T.nodeType||T.jquery)?n(T):n.event,S=n.Deferred(),P=n.Callbacks("once memory"),D=F.statusCode||{},J={},Q={},A=0,E="canceled",L={readyState:0,getResponseHeader:function(V){var U;if(A===2){if(!z){z={};while((U=b.exec(R))){z[U[1].toLowerCase()]=U[2]}}U=z[V.toLowerCase()]}return U==null?null:U},getAllResponseHeaders:function(){return A===2?R:null},setRequestHeader:function(V,W){var U=V.toLowerCase();if(!A){V=Q[U]=Q[U]||V;J[V]=W}return this},overrideMimeType:function(U){if(!A){F.mimeType=U}return this},statusCode:function(V){var U;if(V){if(A<2){for(U in V){D[U]=[D[U],V[U]]}}else{L.always(V[L.status])}}return this},abort:function(V){var U=V||E;if(N){N.abort(U)}H(0,U);return this}};S.promise(L).complete=P.add;L.success=L.done;L.error=L.fail;F.url=((B||F.url||v)+"").replace(k,"").replace(j,g[1]+"//");F.type=y.method||y.type||F.method||F.type;F.dataTypes=n.trim(F.dataType||"*").toLowerCase().match(r)||[""];if(F.crossDomain==null){K=f.exec(F.url.toLowerCase());F.crossDomain=!!(K&&(K[1]!==g[1]||K[2]!==g[2]||(K[3]||(K[1]==="http:"?"80":"443"))!==(g[3]||(g[1]==="http:"?"80":"443"))))}if(F.data&&F.processData&&typeof F.data!=="string"){F.data=n.param(F.data,F.traditional)}q(w,F,y,L);if(A===2){return L}x=n.event&&F.global;if(x&&n.active++===0){n.event.trigger("ajaxStart")}F.type=F.type.toUpperCase();F.hasContent=!h.test(F.type);C=F.url;if(!F.hasContent){if(F.data){C=(F.url+=(i.test(C)?"&":"?")+F.data);delete F.data}if(F.cache===false){F.url=d.test(C)?C.replace(d,"$1_="+s++):C+(i.test(C)?"&":"?")+"_="+s++}}if(F.ifModified){if(n.lastModified[C]){L.setRequestHeader("If-Modified-Since",n.lastModified[C])}if(n.etag[C]){L.setRequestHeader("If-None-Match",n.etag[C])}}if(F.data&&F.hasContent&&F.contentType!==false||y.contentType){L.setRequestHeader("Content-Type",F.contentType)}L.setRequestHeader("Accept",F.dataTypes[0]&&F.accepts[F.dataTypes[0]]?F.accepts[F.dataTypes[0]]+(F.dataTypes[0]!=="*"?", "+l+"; q=0.01":""):F.accepts["*"]);for(M in F.headers){L.setRequestHeader(M,F.headers[M])}if(F.beforeSend&&(F.beforeSend.call(T,L,F)===false||A===2)){return L.abort()}E="abort";for(M in {success:1,error:1,complete:1}){L[M](F[M])}N=q(u,F,y,L);if(!N){H(-1,"No Transport")}else{L.readyState=1;if(x){I.trigger("ajaxSend",[L,F])}if(A===2){return L}if(F.async&&F.timeout>0){G=window.setTimeout(function(){L.abort("timeout")},F.timeout)}try{A=1;N.send(J,H)}catch(O){if(A<2){H(-1,O)}else{throw O}}}function H(Z,V,aa,X){var U,ad,ab,Y,ac,W=V;if(A===2){return}A=2;if(G){window.clearTimeout(G)}N=undefined;R=X||"";L.readyState=Z>0?4:0;U=Z>=200&&Z<300||Z===304;if(aa){Y=t(F,L,aa)}Y=c(F,Y,L,U);if(U){if(F.ifModified){ac=L.getResponseHeader("Last-Modified");if(ac){n.lastModified[C]=ac}ac=L.getResponseHeader("etag");if(ac){n.etag[C]=ac}}if(Z===204||F.type==="HEAD"){W="nocontent"}else{if(Z===304){W="notmodified"}else{W=Y.state;ad=Y.data;ab=Y.error;U=!ab}}}else{ab=W;if(Z||!W){W="error";if(Z<0){Z=0}}}L.status=Z;L.statusText=(V||W)+"";if(U){S.resolveWith(T,[ad,W,L])}else{S.rejectWith(T,[L,W,ab])}L.statusCode(D);D=undefined;if(x){I.trigger(U?"ajaxSuccess":"ajaxError",[L,F,U?ad:ab])}P.fireWith(T,[L,W]);if(x){I.trigger("ajaxComplete",[L,F]);if(!(--n.active)){n.event.trigger("ajaxStop")}}}return L},getJSON:function(x,y,z){return n.get(x,y,z,"json")},getScript:function(x,y){return n.get(x,undefined,y,"script")}});n.each(["get","post"],function(x,y){n[y]=function(z,B,C,A){if(n.isFunction(B)){A=A||C;C=B;B=undefined}return n.ajax(n.extend({url:z,type:y,dataType:A,data:B,success:C},n.isPlainObject(z)&&z))}});return n});